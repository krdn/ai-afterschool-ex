# Environment Configuration Template
# Copy this file to .env.local (development) or .env.production (production)

# =============================================================================
# Application
# =============================================================================
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# Database
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database?options
# Production: Use 'postgres' as host (Docker service name)
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/ai_afterschool?connection_limit=10"

# =============================================================================
# NextAuth.js Authentication
# =============================================================================
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-secret-key-here"
NEXTAUTH_URL="http://localhost:3000"

# =============================================================================
# PDF Storage
# =============================================================================
# Storage type: 'local' (filesystem) or 's3' (MinIO/S3)
PDF_STORAGE_TYPE=local

# Local storage path (used when PDF_STORAGE_TYPE=local)
PDF_STORAGE_PATH="./public/reports"

# MinIO/S3 configuration (used when PDF_STORAGE_TYPE=s3)
# Note: MINIO_ACCESS_KEY and MINIO_SECRET_KEY should match MINIO_ROOT_USER
# and MINIO_ROOT_PASSWORD (below) for the application to connect to MinIO
MINIO_ENDPOINT=minio:9000
MINIO_REGION=us-east-1
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=reports

# =============================================================================
# Cloudinary (Image Upload)
# =============================================================================
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret

# =============================================================================
# Claude AI Integration
# =============================================================================
ANTHROPIC_API_KEY=your-anthropic-api-key

# =============================================================================
# Ollama Configuration (Local LLM)
# =============================================================================
# Local Ollama server URL (default: http://192.168.0.5:11434/api)
# For Docker: Use the host machine's IP, not localhost
# Can point to a proxy like Open WebUI (e.g., https://ollama.krdn.kr/api)
OLLAMA_BASE_URL=http://192.168.0.5:11434/api

# Direct Ollama API URL for model listing (bypasses proxy/auth)
# Only needed when OLLAMA_BASE_URL points to a proxy that requires authentication
OLLAMA_DIRECT_URL=http://192.168.0.5:11434/api

# =============================================================================
# API Key Encryption (Multi-LLM)
# =============================================================================
# Used to encrypt provider API keys stored in database
# Generate with: openssl rand -hex 32
API_KEY_ENCRYPTION_SECRET=

# =============================================================================
# Caddy (Reverse Proxy & SSL)
# =============================================================================
# Domain for SSL certificate
APP_DOMAIN=ai-afterschool.example.com

# Email for Let's Encrypt notifications
CADDY_EMAIL=admin@example.com

# =============================================================================
# Logging & Monitoring
# =============================================================================
# Log level: debug, info, warn, error
# Lower levels include higher levels (debug includes everything)
# - debug: Detailed information for diagnosing problems (development only)
# - info: General informational messages (recommended for production)
# - warn: Warning messages for potentially harmful situations
# - error: Error messages for critical issues
LOG_LEVEL=info

# Bundle Analyzer (Development Only)
# Set to 'true' to enable bundle size analysis during build
# Generates visual reports showing bundle composition and identifying large modules
# WARNING: Do NOT enable in production - increases build time and bundle size
# Use 'npm run analyze' script instead of setting this manually
ANALYZE=false

# =============================================================================
# Sentry Error Tracking
# =============================================================================
# Sentry DSN (Data Source Name) - found in Sentry Dashboard > Client Keys (DSN)
# Required for Sentry to capture errors from your application
NEXT_PUBLIC_SENTRY_DSN=

# Sentry Auth Token - found in Sentry Dashboard > Auth Tokens
# Required for uploading source maps and releases
# NEVER commit this value to version control
SENTRY_AUTH_TOKEN=

# Sentry Organization Slug - found in Sentry Dashboard > Settings > General
SENTRY_ORG=

# Sentry Project Slug - found in Sentry Dashboard > Settings > General
SENTRY_PROJECT=

# Sentry Release (optional) - defaults to package.json version
# Format: v1.0.0, my-app@1.2.3, etc.
SENTRY_RELEASE=

# =============================================================================
# Database Backup (production)
# =============================================================================
# Backup directory - should be a mounted volume for persistence
# Default: ./backups (relative to project root)
BACKUP_DIR=./backups

# Backup retention policy - number of days to keep backups
# Adjust based on storage capacity and compliance requirements
# Default: 30 days
RETENTION_DAYS=30

# Database name for backup (must match POSTGRES_DB)
# Default: ai_afterschool
DB_NAME=ai_afterschool

# Database user for pg_dump (must match POSTGRES_USER)
# Default: postgres
DB_USER=postgres

# =============================================================================
# Docker Compose Overrides (production)
# =============================================================================
# PostgreSQL credentials (for docker-compose.prod.yml)
POSTGRES_DB=ai_afterschool
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# MinIO credentials (for docker-compose.prod.yml)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# =============================================================================
# GitHub Integration (Issue Management)
# =============================================================================
# GitHub Personal Access Token (PAT) with 'repo' scope
# Generate at: https://github.com/settings/tokens
GITHUB_TOKEN=ghp_xxxxxxxxxxxxx

# Repository information
GITHUB_OWNER=krdn
GITHUB_REPO=ai-afterschool

# Rate limit warning threshold (remaining requests before warning)
GITHUB_RATE_LIMIT_THRESHOLD=100

# =============================================================================
# Environment Setup Guide
# =============================================================================
#
# For Production (Docker Compose):
# 1. Generate NEXTAUTH_SECRET: openssl rand -base64 32
# 2. Change default MinIO credentials (MINIO_ROOT_USER, MINIO_ROOT_PASSWORD)
# 3. Set strong PostgreSQL password (POSTGRES_PASSWORD)
# 4. Configure actual domain in NEXT_PUBLIC_APP_URL and NEXTAUTH_URL
# 5. Add real API keys for ANTHROPIC_API_KEY and RESEND_API_KEY
#
# Quick start for local development:
# cp .env.example .env.local
# # Edit .env.local with your values
#